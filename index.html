<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Seat Planner Simulator</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto+Mono&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./src/style.css" />
  </head>
  <body>
    <div class="container">
      <div class="left-container">
        <div class="stage-wrapper">
          <div class="stage-heading">
            <p>Stage</p>
          </div>
        </div>
        <div class="seat-wrapper">
          <div id="seat-grid"></div>
        </div>
        <div class="made-with">
          <p>Made with ❤️ by Gurung Sagar (Student Id: 33147045)</p>
        </div>
      </div>
      <div class="right-container">
        <div class="seat-panel-heading-wrapper">
          <div class="seat-panel-heading">
            <p>Seat Planner Simulator</p>
          </div>
        </div>
        <div class="seat-panel-content-wrapper">
          <div class="seat-panel-content1">
            <div class="seat-type-display">
              <div class="seat-type">
                <div class="color-box" style="background-color: #000a9b"></div>
                <span>VIP</span>
              </div>
              <div class="seat-type">
                <div class="color-box" style="background-color: #37ff52"></div>
                <span>Accessible/Priority</span>
              </div>
              <div class="seat-type">
                <div class="color-box" style="background-color: #000000"></div>
                <span>Broken</span>
              </div>
              <div class="seat-type">
                <div class="color-box" style="background-color: #4b4b4b"></div>
                <span>Available</span>
              </div>
              <div class="seat-type">
                <div class="color-box" style="background-color: #cc0000"></div>
                <span>Occupied</span>
              </div>
            </div>
            <div class="admin-or-staff">
              <p>Operate as:</p>
              <label class="radio-green">
                <input type="radio" name="role" value="admin" />
                Admin
              </label>
              <label class="radio-green">
                <input type="radio" name="role" value="staff" checked />
                Staff
              </label>
            </div>
            <div class="book-input">
              <form id="bookingForm" class="book-input-form">
                <label for="numPeople">Number of People:</label>
                <input type="number" id="numPeople" name="numPeople" min="1" />
                <label for="seatType">Select Seat Type:</label>
                <select id="seatType" name="seatType">
                  <option value="regular">Regular</option>
                  <option value="vip">VIP</option>
                  <option value="accessible">Accessible</option>
                </select>
                <br />
                <label for="preferredSeat"
                  >Seat Preferred (Elderly Only):</label
                >
                <input type="text" id="preferredSeat" name="preferredSeat" />

                <button type="submit" id="bookBtn">Book Seat</button>
              </form>
            </div>
          </div>
          <div class="seat-panel-content2">
            <div class="booking-list-heading">
              <p>Booking List</p>
            </div>
            <div class="booking-list-table">
              <table>
                <thead>
                  <tr>
                    <th>S.N.</th>
                    <th>Booking ID</th>
                    <th>Seat Type</th>
                    <th>Size</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody id="bookingTableBody">
                  <!-- Booking entries will be inserted here -->
                </tbody>
              </table>
            </div>
            <div class="arrange-and-reset-seat">
              <button id="arrangeBtn">Arrange Seats</button>
              <button id="resetBtn">Reset Seats</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
  <script>
    // Wait until DOM is loaded
    document.addEventListener("DOMContentLoaded", function () {
      const seatGrid = document.getElementById("seat-grid");
      seatGrid.classList.add("seat-grid");

      const rows = ["A", "B", "C", "D", "E", "F", "G"];
      const cols = 10;

      for (let i = 0; i < rows.length * cols; i++) {
        const seat = document.createElement("div");
        seat.classList.add("seat");
        seat.textContent = rows[Math.floor(i / cols)] + ((i % cols) + 1);
        // Add click event to each seat
        seat.addEventListener("click", () => {
          alert(`Seat clicked: ${seat.textContent}`);
          // You can replace alert with any custom logic
        });
        seatGrid.appendChild(seat);
      }
    });

    // radio button functionality
    document.addEventListener("DOMContentLoaded", () => {
      const roleRadios = document.querySelectorAll('input[name="role"]');

      roleRadios.forEach((radio) => {
        radio.addEventListener("change", (event) => {
          alert("Selected role: " + event.target.value);
        });
      });
    });

    // form book button
    document.addEventListener("DOMContentLoaded", function () {
      const form = document.getElementById("bookingForm");

      form.addEventListener("submit", function (e) {
        e.preventDefault(); // prevent page reload

        const numPeople = document.getElementById("numPeople").value;
        const seatType = document.getElementById("seatType").value;
        const preferredSeat = document.getElementById("preferredSeat").value;

        alert(
          `Booking Details:\n\n` +
            `Number of People: ${numPeople}\n` +
            `Seat Type: ${seatType}\n` +
            `Preferred Seat: ${preferredSeat}`
        );

        form.reset(); // reset the form after alert
      });
    });

    // table values:
    document.addEventListener("DOMContentLoaded", function () {
      const bookingData = [
        { name: "b1", seatType: "V", size: 2 },
        { name: "b2", seatType: "R", size: 4 },
        { name: "b3", seatType: "A", size: 1 },
        { name: "b4", seatType: "RA", size: 5 },
        { name: "b5", seatType: "V", size: 3 },
        { name: "b6", seatType: "R", size: 2 },
        { name: "b7", seatType: "R", size: 1 },
        { name: "b1", seatType: "V", size: 2 },
        { name: "b2", seatType: "R", size: 4 },
        { name: "b3", seatType: "A", size: 1 },
        { name: "b4", seatType: "RA", size: 5 },
        { name: "b5", seatType: "V", size: 3 },
        { name: "b6", seatType: "R", size: 2 },
        { name: "b7", seatType: "R", size: 1 },
        { name: "b1", seatType: "V", size: 2 },
        { name: "b2", seatType: "R", size: 4 },
        { name: "b3", seatType: "A", size: 1 },
        { name: "b4", seatType: "RA", size: 5 },
        { name: "b5", seatType: "V", size: 3 },
        { name: "b6", seatType: "R", size: 2 },
        { name: "b7", seatType: "R", size: 1 },
      ];

      const tableBody = document.getElementById("bookingTableBody");

      bookingData.forEach((booking, index) => {
        const row = document.createElement("tr");

        row.innerHTML = `
        <td>${index + 1}</td>
        <td>${booking.name}</td>
        <td>${booking.seatType}</td>
        <td>${booking.size}</td>
        <td>${'<button class="delete-btn">Cancel</button>'}</td>
      `;

        tableBody.appendChild(row);
      });

      // Add delete functionality
      tableBody.addEventListener("click", function (e) {
        if (e.target.classList.contains("delete-btn")) {
          e.target.closest("tr").remove();
        }
      });
    });
  </script>
</html>
